import React,{useState,useRef,useEffect,useCallback}from"react";var __assign=function(){return(__assign=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(A[a]=e[a]);return A}).apply(this,arguments)};function __rest(A,e){var t={};for(a in A)Object.prototype.hasOwnProperty.call(A,a)&&e.indexOf(a)<0&&(t[a]=A[a]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(A);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(A,a[r])&&(t[a[r]]=A[a[r]]);return t}function __awaiter(A,n,o,s){return new(o=o||Promise)(function(t,e){function r(A){try{i(s.next(A))}catch(A){e(A)}}function a(A){try{i(s.throw(A))}catch(A){e(A)}}function i(A){var e;A.done?t(A.value):((e=A.value)instanceof o?e:new o(function(A){A(e)})).then(r,a)}i((s=s.apply(A,n||[])).next())})}function __generator(r,a){var i,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:A(0),throw:A(1),return:A(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function A(t){return function(A){var e=[t,A];if(i)throw new TypeError("Generator is already executing.");for(;s=l&&e[l=0]?0:s;)try{if(i=1,n&&(o=2&e[0]?n.return:e[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,e[1])).done)return o;switch(n=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,n=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3]))s.label=e[1];else if(6===e[0]&&s.label<o[1])s.label=o[1],o=e;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(e)}}e=a.call(r,s)}catch(A){e=[6,A],n=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}var _a,DefaultQuality=75,DefaultSsrUa="empty",DefaultSkeletonDataUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwLDAsMjAlLDEwMCUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImciPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRjJGM0Y1IiBvZmZzZXQ9IjI1JSIgLz4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0U1RTZFQiIgb2Zmc2V0PSIzNyUiIC8+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGMkYzRjUiIG9mZnNldD0iNjMlIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHJlY3QgaWQ9InIiIHdpZHRoPSI0MDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZykiIC8+CiAgPGFuaW1hdGUgeGxpbms6aHJlZj0iI3IiIGF0dHJpYnV0ZU5hbWU9IngiIGZyb209Ii0zMDAlIiB0bz0iMCUiIGR1cj0iMS41cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiICAvPgo8L3N2Zz4=",DefaultErrorDataUrl="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9IiNDOUNERDQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgc3Ryb2tlLXdpZHRoPSI0IiB2aWV3Qm94PSIwIDAgNDggNDgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNNDEgMjZWOWEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYzMGEyIDIgMCAwIDAgMiAyaDE3Ij48L3BhdGg+PHBhdGggZD0ibTI0IDMzIDktOC41VjI3cy0yIDEtMy41IDIuNUMyNy44NDEgMzEuMTU5IDI3IDMzIDI3IDMzaC0zWm0wIDAtMy41LTQuNUwxNyAzM2g3WiI+PC9wYXRoPjxwYXRoIGZpbGw9IiNDOUNERDQiIHN0cm9rZT0ibm9uZSIgZD0iTTIwLjUgMjguNSAxNyAzM2g3bC0zLjUtNC41Wk0zMyAyNC41IDI0IDMzaDNzLjg0MS0xLjg0MSAyLjUtMy41QzMxIDI4IDMzIDI3IDMzIDI3di0yLjVaIj48L3BhdGg+PHBhdGggZmlsbD0iI0M5Q0RENCIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9Im5vbmUiIGQ9Ik00NiAzOGE4IDggMCAxIDEtMTYgMCA4IDggMCAwIDEgMTYgMFptLTQuOTUtNC43ODIgMS43NCAxLjc0LTMuMDQ1IDMuMDQ2IDMuMDQ2IDMuMDQ2LTEuNzQgMS43NC0zLjA0Ny0zLjA0NS0zLjA0NiAzLjA0Ni0xLjc0LTEuNzQgMy4wNDYtMy4wNDctMy4wNDYtMy4wNDYgMS43NC0xLjc0IDMuMDQ2IDMuMDQ2IDMuMDQ2LTMuMDQ2WiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PHBhdGggZD0iTTE3IDE1aC0ydjJoMnYtMloiPjwvcGF0aD48L3N2Zz4=",EmptyDataURL="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",DefaultViewerProps={formats:["webp"],imageSizes:[480,750,1080,1366,1920],quality:DefaultQuality,loading:"lazy",lazyBoundary:"200px",placeholder:"empty"},FormatsMap={webp:"awebp",heic:"heif",avif:"avis",jpeg:"jpeg",png:"png"},ErrorUrl={protocol:"http://",domain:"",src:"",search:""},ErrorImageXUrl={protocol:"http://",domain:"",src:"",search:"",template:"",suffix:"",templateWithoutParams:"",params:[]},isStaticRequire=function(A){return void 0!==A.default},isStaticImageData=function(A){return void 0!==A.src},isStaticImport=function(A){return"object"==typeof A&&(isStaticRequire(A)||isStaticImageData(A))},imagexUrlPattern=/^(.+)~(tplv-[a-zA-Z0-9]{2,10}-.+)\.([a-zA-Z]+)\??(.*)$/,isImagexUrl=function(A){return imagexUrlPattern.test(A)},isTosUrl=function(A){return A.startsWith("tos://")||A.startsWith("TOS://")},isHttpUrl=function(A){return/^https?:\/\//i.test(A)||A.startsWith("//")},parseImagexUrl=function(A){try{var e=A.startsWith("http")?A:(A.startsWith("//")?"https:":"http://").concat(A),t=new URL(e),r=imagexUrlPattern.exec(t.pathname.slice(1)),a={protocol:t.protocol,domain:t.hostname,src:r[1],template:r[2],suffix:r[3],search:t.search},i=(a.template||"").split(":");return __assign(__assign({},a),{templateWithoutParams:i.shift()||"",params:i})}catch(A){return console.error(A),ErrorImageXUrl}},parseOtherUrl=function(A){try{var e=A.startsWith("http")?A:(A.startsWith("//")?"https:":"http://").concat(A),t=new URL(e);return{protocol:t.protocol,domain:t.hostname,src:t.pathname.slice(1),search:t.search}}catch(A){return ErrorUrl}},isSSR=function(){return"undefined"==typeof window},supportLocalstorage=function(){return"undefined"!=typeof localStorage&&Boolean(localStorage)&&"function"==typeof localStorage.getItem};function getLocalStorage(e){if(isSSR()||!supportLocalstorage())return null;var A=localStorage.getItem(e);if(!A)return null;try{return JSON.parse(A)}catch(A){return console.error("imagex get localStorage key [".concat(e,"] failed"),A),null}}function setLocalStorage(e,A){if(isSSR()||!supportLocalstorage())return!1;try{var t=JSON.stringify(A);return localStorage.setItem(e,t),!0}catch(A){return console.error("imagex set localStorage key [".concat(e,"] failed"),A),!1}}var browserUserAgent=isSSR()||"undefined"==typeof navigator?"":(null!=(_a=navigator.userAgent)?_a:"").toLocaleLowerCase(),isIOS=function(A){return 0<=A.indexOf("safari")&&A.indexOf("chrome")<0||/iphone|ipad/.test(A)&&0<=A.indexOf("mobile")},isSafari=function(A){return void 0!==A?isIOS(A.toLocaleLowerCase()):!isSSR()&&isIOS(browserUserAgent)},isFirefox=function(A){return void 0!==A?0<=A.toLocaleLowerCase().indexOf("firefox"):!isSSR()&&0<=browserUserAgent.indexOf("firefox")},safeBtoa=function(A){return"undefined"!=typeof btoa?btoa(A):"undefined"!=typeof Buffer?Buffer.from(A,"base64").toString():""},sdkInfo={"imagex-type":"react","imagex-version":"0.3.15"},getWidths=function(A,e,t,r,a,i){var n;return i?{widths:[0],kind:"x"}:a?{widths:A,kind:"w"}:"fill"===t?(n=(null==(a=null==(i=r.current)?void 0:i.parentElement)?void 0:a.clientWidth)||0,{widths:Array.from(new Set([n,2*n].map(function(e){return 0<A.length?A.find(function(A){return e<=A})||A[A.length-1]:e}))),kind:"x"}):"responsive"===t?(n=(null==(a=null==(i=r.current)?void 0:i.parentElement)?void 0:a.clientWidth)||0,r=parseInt((null==(a=null==(i=null==(t=r.current)?void 0:t.parentElement)?void 0:i.style)?void 0:a.paddingLeft)||"0")+parseInt((null==(a=null==(i=null==(t=r.current)?void 0:t.parentElement)?void 0:i.style)?void 0:a.paddingRight)||"0"),t=Math.max(n-r,0),{widths:Array.from(new Set([t,2*t].map(function(e){return 0<A.length?A.find(function(A){return e<=A})||A[A.length-1]:e}))),kind:"x"}):void 0!==e?{widths:Array.from(new Set([e,2*e].map(function(e){return 0<A.length?A.find(function(A){return e<=A})||A[A.length-1]:e}))),kind:"x"}:{widths:[0],kind:"x"}},handleImageDecode=function(t,r,a,A,i,n){var e;!t||null!=(e=t.src)&&e.startsWith("data:")||null!=(e=t.src)&&e.startsWith("blob:")||t["loaded-src"]===t.src?t.src!==A&&r(!0):(t["loaded-src"]=t.src,("decode"in t?t.decode():Promise.resolve()).catch(function(){}).then(function(){var A,e;t.parentNode&&(n.current.add(t.src),"empty"!==a&&r(!0),null!=i)&&i.current&&(A=t.naturalWidth,e=t.naturalHeight,i.current({naturalWidth:A,naturalHeight:e}))}))},genImgSourceProps=function(A){var t,e,r,a,i,n,o,s,l,c,u,g,d,m,p,f,h,y,I=A.src,w=A.unoptimized,b=A.layout,v=A.quality,S=A.sizes,E=A.loader,D=A.imageSizes,R=A.format,x=void 0===R?"image":R,R=A.width,_=A.wrapperElement,A=A.ssr;return I?w?{src:I}:(D=(w=getWidths(D,R,b,_,S,A)).widths,t=w.kind,isImagexUrl(I)?(R=parseImagexUrl(I),e=R.src,r=R.protocol,a=R.domain,i=R.suffix,n=R.template,o=R.search,s=R.templateWithoutParams,l=R.params,D.length<=1?{srcSet:h=E({src:e,width:D[0]||0,quality:v,format:x,extra:{suffix:i,template:n,templateWithoutParams:s,params:l,search:o,protocol:r,domain:a,origin:I}}),src:h}:(c=D.map(function(A){return E({src:e,width:A,quality:v,format:x,extra:{suffix:i,template:n,templateWithoutParams:s,params:l,search:o,protocol:r,domain:a,origin:I}})}),{srcSet:D.map(function(A,e){return"".concat(c[e]," ").concat("w"===t?A:e+1).concat(t)}).join(", "),sizes:"w"===t?S:void 0,src:c[c.length-1]})):isTosUrl(I)?(u=I.slice("tos://".length),D.length<=1?{srcSet:h=E({src:u,width:D[0]||0,quality:v,format:x,extra:{origin:I}}),src:h}:(g=D.map(function(A){return E({src:u,width:A,quality:v,format:x,extra:{origin:I}})}),{srcSet:D.map(function(A,e){return"".concat(g[e]," ").concat("w"===t?A:e+1).concat(t)}).join(", "),sizes:"w"===t?S:void 0,src:g[g.length-1]})):(b=parseOtherUrl(I),d=b.src,m=b.protocol,p=b.domain,f=b.search,D.length<=1?{srcSet:h=E({src:d,width:D[0]||0,quality:v,format:x,extra:{protocol:m,domain:p,search:f,origin:I}}),src:h}:(y=D.map(function(A){return E({src:d,width:A,quality:v,format:x,extra:{protocol:m,domain:p,search:f,origin:I}})}),{srcSet:D.map(function(A,e){return"".concat(y[e]," ").concat("w"===t?A:e+1).concat(t)}).join(", "),sizes:"w"===t?S:void 0,src:y[y.length-1]}))):{src:""}},renderErrorElement=function(A){var e=A.imgStyle,t=A.errorDataURL,r=A.alt,A=A.error;return A?React.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0}},A):React.createElement("div",{style:__assign(__assign({},e||{}),{color:"#C9CDD4",backgroundColor:"#F7F8FA",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})},React.createElement("div",{style:{maxWidth:"100%",maxHeight:"100%",width:"100%",lineHeight:0,fontSize:0,textAlign:"center"}},React.createElement("img",{style:{maxWidth:"60%",verticalAlign:"middle"},src:t||DefaultErrorDataUrl})),r&&React.createElement("div",{style:{fontSize:"12px",lineHeight:1.667,textAlign:"center",padding:"8px 16px",width:"100%",overflow:"hidden",textOverflow:"ellipsis"}},r))},ImageElement=function(A){function e(A){var e=A.src||"",t=A.format||"image",r=A.quality||75,e="".concat(e,"_").concat(r,"_").concat(t);return W.current[e]||(W.current[e]=genImgSourceProps(A)),W.current[e]}var t,r=A.formats,a=A.src,i=A.srcString,n=A.unoptimized,o=A.layout,s=A.loader,l=A.imageSizes,c=A.quality,u=void 0===c?DefaultQuality:c,g=A.sizes,c=A.placeholderStyle,d=A.imgStyle,m=A.isVisible,p=A.width,f=A.height,h=A.setPlaceholderComplete,y=A.placeholder,I=A.setTarget,w=A.onLoadingCompleteRef,b=A.loadedImageURLsRef,v=A.onLoad,S=A.onError,E=A.wrapperElement,D=A.errorDataURL,R=A.error,x=A.supportWebP,_=A.supportAVIF,z=A.ssr,M=A.ua,L=__rest(A,["formats","src","srcString","unoptimized","layout","loader","imageSizes","quality","sizes","placeholderStyle","imgStyle","isVisible","width","height","setPlaceholderComplete","placeholder","setTarget","onLoadingCompleteRef","loadedImageURLsRef","onLoad","onError","wrapperElement","errorDataURL","error","supportWebP","supportAVIF","ssr","ua"]),C=useState(!1),G=C[0],B=C[1],W=useRef({}),C=(useEffect(function(){W.current={}},[i,n,o,u,g,s,l,p,E]),useCallback(function(A){I(A),null!=A&&A.complete&&handleImageDecode(A,h,y,a,w,b)},[h,y,I,w]));return i?n?React.createElement(React.Fragment,null,React.createElement("img",__assign({},L,{ref:C,decoding:"async",style:__assign(__assign({},d),c),width:p,height:f},m?e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,quality:u,sizes:g,wrapperElement:E}):{src:a},{onLoad:function(A){B(!1);var e=A.currentTarget;handleImageDecode(e,h,y,a,w,b),v&&v(A)},onError:function(A){i&&("empty"!==y&&h(!0),B(!0)),S&&S(A)}},sdkInfo)),G&&"raw"!==o&&renderErrorElement({imgStyle:d,alt:A.alt,errorDataURL:D,error:R})):(t=r||[],isFirefox(M)&&(t=t.filter(function(A){return"avif"!==A||!z&&_})),z?isSafari(M)||M===DefaultSsrUa?React.createElement(React.Fragment,null,React.createElement("img",__assign({},L,{ref:C,decoding:"async",style:__assign(__assign({},d),c),width:p,height:f,src:e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,quality:u,sizes:g,wrapperElement:E,ssr:z}).src,onLoad:function(A){B(!1);var e=A.currentTarget;handleImageDecode(e,h,y,a,w,b),v&&v(A)},onError:function(A){i&&("empty"!==y&&h(!0),B(!0)),S&&S(A)}},sdkInfo)),G&&"raw"!==o&&renderErrorElement({imgStyle:d,alt:A.alt,errorDataURL:D,error:R})):React.createElement(React.Fragment,null,React.createElement("picture",null,Array.isArray(t)&&0<(null==t?void 0:t.length)&&t.map(function(A){return React.createElement("source",{key:A,type:"image/".concat(A),srcSet:e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,format:FormatsMap[A],quality:u,sizes:g,wrapperElement:E,ssr:z}).srcSet})}),React.createElement("img",__assign({},L,{ref:C,decoding:"async",style:__assign(__assign({},d),c),width:p,height:f},e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,quality:u,sizes:g,wrapperElement:E,ssr:z}),{onLoad:function(A){B(!1);var e=A.currentTarget;handleImageDecode(e,h,y,a,w,b),v&&v(A)},onError:function(A){i&&("empty"!==y&&h(!0),B(!0)),S&&S(A)}},sdkInfo))),G&&"raw"!==o&&renderErrorElement({imgStyle:d,alt:A.alt,errorDataURL:D,error:R})):React.createElement(React.Fragment,null,isSafari()?React.createElement("img",__assign({},L,{ref:C,decoding:"async",style:__assign(__assign({},d),c),width:p,height:f},m?e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,quality:u,sizes:g,wrapperElement:E,format:null!=r&&r.includes("webp")&&x?FormatsMap.webp:void 0}):{src:a},{onLoad:function(A){B(!1);var e=A.currentTarget;handleImageDecode(e,h,y,a,w,b),v&&v(A)},onError:function(A){i&&("empty"!==y&&h(!0),B(!0)),S&&S(A)}},sdkInfo)):React.createElement("picture",null,m&&Array.isArray(t)&&0<(null==t?void 0:t.length)&&t.map(function(A){return React.createElement("source",__assign({key:A,type:"image/".concat(A)},e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,format:FormatsMap[A],quality:u,sizes:g,wrapperElement:E})))}),React.createElement("img",__assign({},L,{ref:C,decoding:"async",style:__assign(__assign({},d),c),width:p,height:f},m?e({src:i,unoptimized:n,width:p,height:f,layout:o,loader:s,imageSizes:l,quality:u,sizes:g,wrapperElement:E}):{src:a},{onLoad:function(A){B(!1);var e=A.currentTarget;handleImageDecode(e,h,y,a,w,b),v&&v(A)},onError:function(A){i&&("empty"!==y&&h(!0),B(!0)),S&&S(A)}},sdkInfo))),G&&"raw"!==o&&renderErrorElement({imgStyle:d,alt:A.alt,errorDataURL:D,error:R}))):React.createElement("img",__assign({},L,{style:__assign(__assign({},d),c),width:p,height:f,src:a},sdkInfo))},hasIntersectionObserver=function(){return"undefined"!=typeof IntersectionObserver},observers=new Map,idList=[],createObserver=function(A){var t,e={root:A.root||null,margin:A.rootMargin||""},r=idList.find(function(A){return A.root===e.root&&A.margin===e.margin});return r?observers.get(r):(t=new Map,r=new IntersectionObserver(function(A){A.forEach(function(A){var e=t.get(A.target),A=A.isIntersecting||0<A.intersectionRatio;e&&A&&e(A)})},A),A={id:e,observer:r,elements:t},idList.push(e),observers.set(e,A),A)},observe=function(e,A,t){var t=createObserver(t),r=t.id,a=t.observer,i=t.elements;return i.set(e,A),a.observe(e),function(){var A;i.delete(e),a.unobserve(e),0===i.size&&(a.disconnect(),observers.delete(r),-1<(A=idList.findIndex(function(A){return A.root===r.root&&A.margin===r.margin})))&&idList.splice(A,1)}},useIntersection=function(A){var e=A.rootRef,t=A.rootMargin,A=A.disabled,r=A||!hasIntersectionObserver(),a=useRef(),A=useState(A||!1),i=A[0],n=A[1],A=useState(e?e.current:null),o=A[0],s=A[1],A=(useEffect(function(){hasIntersectionObserver()||i||n(!0)},[i]),useEffect(function(){e&&s(e.current)},[e]),useCallback(function(A){a.current&&(a.current(),a.current=void 0),r||i||A&&A.tagName&&(a.current=observe(A,function(A){return A&&n(A)},{root:o,rootMargin:t}))},[r,o,t,i])),l=useCallback(function(){n(!1)},[]);return[A,i,l]},checkWebP=function(){return new Promise(function(e){var t=new Image;t.onload=function(){var A=160===(null==t?void 0:t.height);e(A)},t.onerror=function(){e(!1)},t.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvn8AnAAdQiUpUov+BiOh/AAA="})},useWebp=function(A){void 0===A&&(A=!1),isSSR()||(e="boolean"==typeof window.imagex_support_webp?window.imagex_support_webp:"boolean"==typeof(e=getLocalStorage("imagex_support_webp"))&&getLocalStorage("imagex_ua")===browserUserAgent?e:void 0);var e,A=useState(!A&&e),t=A[0],r=A[1];return useEffect(function(){void 0===t&&__awaiter(void 0,void 0,void 0,function(){var e;return __generator(this,function(A){switch(A.label){case 0:return[4,checkWebP()];case 1:return e=A.sent(),isSSR()||(window.imagex_support_webp=e),r(e),setLocalStorage("imagex_support_webp",e),setLocalStorage("imagex_ua",browserUserAgent),[2]}})}).catch(console.error)},[t]),[t]},checkAVIF=function(){return new Promise(function(e){var t=new Image;t.onload=function(){var A=1===(null==t?void 0:t.width);e(A)},t.onerror=function(){e(!1)},t.src="data:image/avif;base64,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"})},useAvif=function(A){void 0===A&&(A=!1),isSSR()||(e="boolean"==typeof window.imagex_support_avif?window.imagex_support_avif:"boolean"==typeof(e=getLocalStorage("imagex_support_avif"))&&getLocalStorage("imagex_ua")===browserUserAgent?e:void 0);var e,A=useState(!A&&e),t=A[0],r=A[1];return useEffect(function(){void 0===t&&__awaiter(void 0,void 0,void 0,function(){var e;return __generator(this,function(A){switch(A.label){case 0:return[4,checkAVIF()];case 1:return e=A.sent(),isSSR()||(window.imagex_support_avif=e),r(e),setLocalStorage("imagex_support_avif",e),setLocalStorage("imagex_ua",browserUserAgent),[2]}})}).catch(console.error)},[t]),[t]},useLayoutEffect="undefined"==typeof window?React.useEffect:React.useLayoutEffect,globalConfig={},GlobalConfig=function(A){void 0===A&&(A={}),globalConfig=__assign(__assign({},globalConfig),A)},validConfig=function(A){return __assign(__assign({},A||{}),{formats:Array.isArray(A.formats)?Array.from(new Set(A.formats)):void 0})},getStaticUrl=function(A){return isStaticImport(A)?(isStaticRequire(A)?A.default:A).src:A},defaultLoader=function(A){return A.src},Viewer=function(A){var e,t=useState(!1),r=t[0],t=t[1],a=useRef(null),i=useWebp(!isSafari())[0],n=useAvif(!isFirefox())[0],o=useRef(new Set),s=void 0!==A.width&&void 0!==A.height?"data:image/svg+xml;base64,".concat(safeBtoa('<svg width="'.concat(A.width,'" height="').concat(A.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'))):EmptyDataURL,A=validConfig(__assign(__assign(__assign({},DefaultViewerProps),globalConfig),A)),l=A.lazyBoundary,c=A.lazyRoot,u=A.onLoadingComplete,g=A.unoptimized,g=void 0!==g&&g,d=A.src,m=void 0===d?"":d,d=A.objectFit,p=A.objectPosition,f=A.loading,h=__rest(A,["lazyBoundary","lazyRoot","onLoadingComplete","unoptimized","src","objectFit","objectPosition","loading"]),y=getStaticUrl(A.src),f="lazy"===f||void 0===f,c=(((m="string"==typeof m?m:y).startsWith("data:")||m.startsWith("blob:")||"undefined"!=typeof window&&o.current.has(m)||A.ssr)&&(f=!1),isHttpUrl(m)||isTosUrl(m)||(g=!0),useIntersection({rootRef:c||null,rootMargin:l,disabled:!f})),l=c[0],I=c[1],w=c[2],c=!1,c=!!A.ssr||(!f||I)&&!!m&&(!isSafari()||void 0!==i)&&(!isFirefox()||void 0!==n),b=useRef(u),v=(useEffect(function(){b.current=u},[u]),useRef(m)),f=(useLayoutEffect(function(){v.current!==m&&(w(),v.current=m)},[w,m]),A.layout||(A.sizes?"responsive":"intrinsic")),I={boxSizing:"border-box",display:"block",overflow:"hidden",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},S={boxSizing:"border-box",display:"block",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},E="raw"===A.layout?{}:{position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",padding:0,border:"none",margin:"auto",display:"block",width:0,height:0,minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",objectFit:d,objectPosition:p},r="empty"===A.placeholder||r?{}:{backgroundSize:"fill"===d?"100% 100%":d||"cover",backgroundImage:'url("'.concat("skeleton"===A.placeholder?DefaultSkeletonDataUrl:A.placeholder,'")'),backgroundPosition:p||"0% 0%"},d=!1,p=("fill"===f?(I.display="block",I.position="absolute",I.top=0,I.left=0,I.bottom=0,I.right=0):void 0!==A.width&&void 0!==A.height&&("intrinsic"===f?(I.display="inline-block",I.position="relative",d=!0,S.maxWidth=I.maxWidth="100%",e="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27".concat(A.width,"%27%20height=%27").concat(A.height,"%27/%3e")):"responsive"===f?(p=A.height/A.width,p=isNaN(p)?"100%":"".concat(100*p,"%"),I.display="block",I.position="relative",d=!0,S.paddingTop=p):"fixed"===f&&(I.display="inline-block",I.position="relative",I.width=A.width,I.height=A.height)),__assign(__assign({},h),{src:s,srcString:y,loader:A.loader||defaultLoader,imageSizes:A.imageSizes,placeholderStyle:r,isVisible:c,unoptimized:g,setPlaceholderComplete:t,setTarget:l,imgStyle:Object.assign({},A.style,E),onLoadingCompleteRef:b,loadedImageURLsRef:o,wrapperElement:a,supportWebP:i,supportAVIF:n}));return React.createElement(React.Fragment,null,"raw"===A.layout?React.createElement(ImageElement,__assign({},p)):React.createElement("span",{ref:a,style:I},d&&React.createElement("span",{style:S},e&&React.createElement("img",{style:{display:"block",maxWidth:"100%",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},alt:"","aria-hidden":!0,src:e})),React.createElement(ImageElement,__assign({},p))))};export{GlobalConfig,Viewer};
