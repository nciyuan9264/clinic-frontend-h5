"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),__assign=function(){return(__assign=Object.assign||function(e){for(var A,t=1,a=arguments.length;t<a;t++)for(var r in A=arguments[t])Object.prototype.hasOwnProperty.call(A,r)&&(e[r]=A[r]);return e}).apply(this,arguments)};function __rest(e,A){var t={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&A.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)A.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t}function __awaiter(e,n,o,l){return new(o=o||Promise)(function(t,A){function a(e){try{i(l.next(e))}catch(e){A(e)}}function r(e){try{i(l.throw(e))}catch(e){A(e)}}function i(e){var A;e.done?t(e.value):((A=e.value)instanceof o?A:new o(function(e){e(A)})).then(a,r)}i((l=l.apply(e,n||[])).next())})}function __generator(a,r){var i,n,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function e(t){return function(e){var A=[t,e];if(i)throw new TypeError("Generator is already executing.");for(;l=s&&A[s=0]?0:l;)try{if(i=1,n&&(o=2&A[0]?n.return:A[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,A[1])).done)return o;switch(n=0,(A=o?[2&A[0],o.value]:A)[0]){case 0:case 1:o=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,n=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===A[0]||2===A[0])){l=0;continue}if(3===A[0]&&(!o||A[1]>o[0]&&A[1]<o[3]))l.label=A[1];else if(6===A[0]&&l.label<o[1])l.label=o[1],o=A;else{if(!(o&&l.label<o[2])){o[2]&&l.ops.pop(),l.trys.pop();continue}l.label=o[2],l.ops.push(A)}}A=r.call(a,l)}catch(e){A=[6,e],n=0}finally{i=o=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}}var _a,DefaultQuality=75,DefaultSsrUa="empty",DefaultSkeletonDataUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwLDAsMjAlLDEwMCUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImciPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRjJGM0Y1IiBvZmZzZXQ9IjI1JSIgLz4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0U1RTZFQiIgb2Zmc2V0PSIzNyUiIC8+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGMkYzRjUiIG9mZnNldD0iNjMlIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHJlY3QgaWQ9InIiIHdpZHRoPSI0MDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZykiIC8+CiAgPGFuaW1hdGUgeGxpbms6aHJlZj0iI3IiIGF0dHJpYnV0ZU5hbWU9IngiIGZyb209Ii0zMDAlIiB0bz0iMCUiIGR1cj0iMS41cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiICAvPgo8L3N2Zz4=",DefaultErrorDataUrl="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9IiNDOUNERDQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgc3Ryb2tlLXdpZHRoPSI0IiB2aWV3Qm94PSIwIDAgNDggNDgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNNDEgMjZWOWEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYzMGEyIDIgMCAwIDAgMiAyaDE3Ij48L3BhdGg+PHBhdGggZD0ibTI0IDMzIDktOC41VjI3cy0yIDEtMy41IDIuNUMyNy44NDEgMzEuMTU5IDI3IDMzIDI3IDMzaC0zWm0wIDAtMy41LTQuNUwxNyAzM2g3WiI+PC9wYXRoPjxwYXRoIGZpbGw9IiNDOUNERDQiIHN0cm9rZT0ibm9uZSIgZD0iTTIwLjUgMjguNSAxNyAzM2g3bC0zLjUtNC41Wk0zMyAyNC41IDI0IDMzaDNzLjg0MS0xLjg0MSAyLjUtMy41QzMxIDI4IDMzIDI3IDMzIDI3di0yLjVaIj48L3BhdGg+PHBhdGggZmlsbD0iI0M5Q0RENCIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9Im5vbmUiIGQ9Ik00NiAzOGE4IDggMCAxIDEtMTYgMCA4IDggMCAwIDEgMTYgMFptLTQuOTUtNC43ODIgMS43NCAxLjc0LTMuMDQ1IDMuMDQ2IDMuMDQ2IDMuMDQ2LTEuNzQgMS43NC0zLjA0Ny0zLjA0NS0zLjA0NiAzLjA0Ni0xLjc0LTEuNzQgMy4wNDYtMy4wNDctMy4wNDYtMy4wNDYgMS43NC0xLjc0IDMuMDQ2IDMuMDQ2IDMuMDQ2LTMuMDQ2WiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PHBhdGggZD0iTTE3IDE1aC0ydjJoMnYtMloiPjwvcGF0aD48L3N2Zz4=",EmptyDataURL="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",DefaultViewerProps={formats:["webp"],imageSizes:[480,750,1080,1366,1920],quality:DefaultQuality,loading:"lazy",lazyBoundary:"200px",placeholder:"empty"},FormatsMap={webp:"awebp",heic:"heif",avif:"avis",jpeg:"jpeg",png:"png"},ErrorUrl={protocol:"http://",domain:"",src:"",search:""},ErrorImageXUrl={protocol:"http://",domain:"",src:"",search:"",template:"",suffix:"",templateWithoutParams:"",params:[]},isStaticRequire=function(e){return void 0!==e.default},isStaticImageData=function(e){return void 0!==e.src},isStaticImport=function(e){return"object"==typeof e&&(isStaticRequire(e)||isStaticImageData(e))},imagexUrlPattern=/^(.+)~(tplv-[a-zA-Z0-9]{2,10}-.+)\.([a-zA-Z]+)\??(.*)$/,isImagexUrl=function(e){return imagexUrlPattern.test(e)},isTosUrl=function(e){return e.startsWith("tos://")||e.startsWith("TOS://")},isHttpUrl=function(e){return/^https?:\/\//i.test(e)||e.startsWith("//")},parseImagexUrl=function(e){try{var A=e.startsWith("http")?e:(e.startsWith("//")?"https:":"http://").concat(e),t=new URL(A),a=imagexUrlPattern.exec(t.pathname.slice(1)),r={protocol:t.protocol,domain:t.hostname,src:a[1],template:a[2],suffix:a[3],search:t.search},i=(r.template||"").split(":");return __assign(__assign({},r),{templateWithoutParams:i.shift()||"",params:i})}catch(e){return console.error(e),ErrorImageXUrl}},parseOtherUrl=function(e){try{var A=e.startsWith("http")?e:(e.startsWith("//")?"https:":"http://").concat(e),t=new URL(A);return{protocol:t.protocol,domain:t.hostname,src:t.pathname.slice(1),search:t.search}}catch(e){return ErrorUrl}},isSSR=function(){return"undefined"==typeof window},supportLocalstorage=function(){return"undefined"!=typeof localStorage&&Boolean(localStorage)&&"function"==typeof localStorage.getItem};function getLocalStorage(A){if(isSSR()||!supportLocalstorage())return null;var e=localStorage.getItem(A);if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("imagex get localStorage key [".concat(A,"] failed"),e),null}}function setLocalStorage(A,e){if(isSSR()||!supportLocalstorage())return!1;try{var t=JSON.stringify(e);return localStorage.setItem(A,t),!0}catch(e){return console.error("imagex set localStorage key [".concat(A,"] failed"),e),!1}}var browserUserAgent=isSSR()||"undefined"==typeof navigator?"":(null!=(_a=navigator.userAgent)?_a:"").toLocaleLowerCase(),isIOS=function(e){return 0<=e.indexOf("safari")&&e.indexOf("chrome")<0||/iphone|ipad/.test(e)&&0<=e.indexOf("mobile")},isSafari=function(e){return void 0!==e?isIOS(e.toLocaleLowerCase()):!isSSR()&&isIOS(browserUserAgent)},isFirefox=function(e){return void 0!==e?0<=e.toLocaleLowerCase().indexOf("firefox"):!isSSR()&&0<=browserUserAgent.indexOf("firefox")},safeBtoa=function(e){return"undefined"!=typeof btoa?btoa(e):"undefined"!=typeof Buffer?Buffer.from(e,"base64").toString():""},sdkInfo={"imagex-type":"react","imagex-version":"0.3.15"},getWidths=function(e,A,t,a,r,i){var n;return i?{widths:[0],kind:"x"}:r?{widths:e,kind:"w"}:"fill"===t?(n=(null==(r=null==(i=a.current)?void 0:i.parentElement)?void 0:r.clientWidth)||0,{widths:Array.from(new Set([n,2*n].map(function(A){return 0<e.length?e.find(function(e){return A<=e})||e[e.length-1]:A}))),kind:"x"}):"responsive"===t?(n=(null==(r=null==(i=a.current)?void 0:i.parentElement)?void 0:r.clientWidth)||0,a=parseInt((null==(r=null==(i=null==(t=a.current)?void 0:t.parentElement)?void 0:i.style)?void 0:r.paddingLeft)||"0")+parseInt((null==(r=null==(i=null==(t=a.current)?void 0:t.parentElement)?void 0:i.style)?void 0:r.paddingRight)||"0"),t=Math.max(n-a,0),{widths:Array.from(new Set([t,2*t].map(function(A){return 0<e.length?e.find(function(e){return A<=e})||e[e.length-1]:A}))),kind:"x"}):void 0!==A?{widths:Array.from(new Set([A,2*A].map(function(A){return 0<e.length?e.find(function(e){return A<=e})||e[e.length-1]:A}))),kind:"x"}:{widths:[0],kind:"x"}},handleImageDecode=function(t,a,r,e,i,n){var A;!t||null!=(A=t.src)&&A.startsWith("data:")||null!=(A=t.src)&&A.startsWith("blob:")||t["loaded-src"]===t.src?t.src!==e&&a(!0):(t["loaded-src"]=t.src,("decode"in t?t.decode():Promise.resolve()).catch(function(){}).then(function(){var e,A;t.parentNode&&(n.current.add(t.src),"empty"!==r&&a(!0),null!=i)&&i.current&&(e=t.naturalWidth,A=t.naturalHeight,i.current({naturalWidth:e,naturalHeight:A}))}))},genImgSourceProps=function(e){var t,A,a,r,i,n,o,l,s,c,u,d,g,f,m,p,h,y,I=e.src,w=e.unoptimized,b=e.layout,_=e.quality,v=e.sizes,S=e.loader,E=e.imageSizes,R=e.format,D=void 0===R?"image":R,R=e.width,x=e.wrapperElement,e=e.ssr;return I?w?{src:I}:(E=(w=getWidths(E,R,b,x,v,e)).widths,t=w.kind,isImagexUrl(I)?(R=parseImagexUrl(I),A=R.src,a=R.protocol,r=R.domain,i=R.suffix,n=R.template,o=R.search,l=R.templateWithoutParams,s=R.params,E.length<=1?{srcSet:h=S({src:A,width:E[0]||0,quality:_,format:D,extra:{suffix:i,template:n,templateWithoutParams:l,params:s,search:o,protocol:a,domain:r,origin:I}}),src:h}:(c=E.map(function(e){return S({src:A,width:e,quality:_,format:D,extra:{suffix:i,template:n,templateWithoutParams:l,params:s,search:o,protocol:a,domain:r,origin:I}})}),{srcSet:E.map(function(e,A){return"".concat(c[A]," ").concat("w"===t?e:A+1).concat(t)}).join(", "),sizes:"w"===t?v:void 0,src:c[c.length-1]})):isTosUrl(I)?(u=I.slice("tos://".length),E.length<=1?{srcSet:h=S({src:u,width:E[0]||0,quality:_,format:D,extra:{origin:I}}),src:h}:(d=E.map(function(e){return S({src:u,width:e,quality:_,format:D,extra:{origin:I}})}),{srcSet:E.map(function(e,A){return"".concat(d[A]," ").concat("w"===t?e:A+1).concat(t)}).join(", "),sizes:"w"===t?v:void 0,src:d[d.length-1]})):(b=parseOtherUrl(I),g=b.src,f=b.protocol,m=b.domain,p=b.search,E.length<=1?{srcSet:h=S({src:g,width:E[0]||0,quality:_,format:D,extra:{protocol:f,domain:m,search:p,origin:I}}),src:h}:(y=E.map(function(e){return S({src:g,width:e,quality:_,format:D,extra:{protocol:f,domain:m,search:p,origin:I}})}),{srcSet:E.map(function(e,A){return"".concat(y[A]," ").concat("w"===t?e:A+1).concat(t)}).join(", "),sizes:"w"===t?v:void 0,src:y[y.length-1]}))):{src:""}},renderErrorElement=function(e){var A=e.imgStyle,t=e.errorDataURL,a=e.alt,e=e.error;return e?React__default.default.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0}},e):React__default.default.createElement("div",{style:__assign(__assign({},A||{}),{color:"#C9CDD4",backgroundColor:"#F7F8FA",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})},React__default.default.createElement("div",{style:{maxWidth:"100%",maxHeight:"100%",width:"100%",lineHeight:0,fontSize:0,textAlign:"center"}},React__default.default.createElement("img",{style:{maxWidth:"60%",verticalAlign:"middle"},src:t||DefaultErrorDataUrl})),a&&React__default.default.createElement("div",{style:{fontSize:"12px",lineHeight:1.667,textAlign:"center",padding:"8px 16px",width:"100%",overflow:"hidden",textOverflow:"ellipsis"}},a))},ImageElement=function(e){function A(e){var A=e.src||"",t=e.format||"image",a=e.quality||75,A="".concat(A,"_").concat(a,"_").concat(t);return W.current[A]||(W.current[A]=genImgSourceProps(e)),W.current[A]}var t,a=e.formats,r=e.src,i=e.srcString,n=e.unoptimized,o=e.layout,l=e.loader,s=e.imageSizes,c=e.quality,u=void 0===c?DefaultQuality:c,d=e.sizes,c=e.placeholderStyle,g=e.imgStyle,f=e.isVisible,m=e.width,p=e.height,h=e.setPlaceholderComplete,y=e.placeholder,I=e.setTarget,w=e.onLoadingCompleteRef,b=e.loadedImageURLsRef,_=e.onLoad,v=e.onError,S=e.wrapperElement,E=e.errorDataURL,R=e.error,D=e.supportWebP,x=e.supportAVIF,z=e.ssr,M=e.ua,L=__rest(e,["formats","src","srcString","unoptimized","layout","loader","imageSizes","quality","sizes","placeholderStyle","imgStyle","isVisible","width","height","setPlaceholderComplete","placeholder","setTarget","onLoadingCompleteRef","loadedImageURLsRef","onLoad","onError","wrapperElement","errorDataURL","error","supportWebP","supportAVIF","ssr","ua"]),G=React.useState(!1),C=G[0],B=G[1],W=React.useRef({}),G=(React.useEffect(function(){W.current={}},[i,n,o,u,d,l,s,m,S]),React.useCallback(function(e){I(e),null!=e&&e.complete&&handleImageDecode(e,h,y,r,w,b)},[h,y,I,w]));return i?n?React__default.default.createElement(React__default.default.Fragment,null,React__default.default.createElement("img",__assign({},L,{ref:G,decoding:"async",style:__assign(__assign({},g),c),width:m,height:p},f?A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,quality:u,sizes:d,wrapperElement:S}):{src:r},{onLoad:function(e){B(!1);var A=e.currentTarget;handleImageDecode(A,h,y,r,w,b),_&&_(e)},onError:function(e){i&&("empty"!==y&&h(!0),B(!0)),v&&v(e)}},sdkInfo)),C&&"raw"!==o&&renderErrorElement({imgStyle:g,alt:e.alt,errorDataURL:E,error:R})):(t=a||[],isFirefox(M)&&(t=t.filter(function(e){return"avif"!==e||!z&&x})),z?isSafari(M)||M===DefaultSsrUa?React__default.default.createElement(React__default.default.Fragment,null,React__default.default.createElement("img",__assign({},L,{ref:G,decoding:"async",style:__assign(__assign({},g),c),width:m,height:p,src:A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,quality:u,sizes:d,wrapperElement:S,ssr:z}).src,onLoad:function(e){B(!1);var A=e.currentTarget;handleImageDecode(A,h,y,r,w,b),_&&_(e)},onError:function(e){i&&("empty"!==y&&h(!0),B(!0)),v&&v(e)}},sdkInfo)),C&&"raw"!==o&&renderErrorElement({imgStyle:g,alt:e.alt,errorDataURL:E,error:R})):React__default.default.createElement(React__default.default.Fragment,null,React__default.default.createElement("picture",null,Array.isArray(t)&&0<(null==t?void 0:t.length)&&t.map(function(e){return React__default.default.createElement("source",{key:e,type:"image/".concat(e),srcSet:A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,format:FormatsMap[e],quality:u,sizes:d,wrapperElement:S,ssr:z}).srcSet})}),React__default.default.createElement("img",__assign({},L,{ref:G,decoding:"async",style:__assign(__assign({},g),c),width:m,height:p},A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,quality:u,sizes:d,wrapperElement:S,ssr:z}),{onLoad:function(e){B(!1);var A=e.currentTarget;handleImageDecode(A,h,y,r,w,b),_&&_(e)},onError:function(e){i&&("empty"!==y&&h(!0),B(!0)),v&&v(e)}},sdkInfo))),C&&"raw"!==o&&renderErrorElement({imgStyle:g,alt:e.alt,errorDataURL:E,error:R})):React__default.default.createElement(React__default.default.Fragment,null,isSafari()?React__default.default.createElement("img",__assign({},L,{ref:G,decoding:"async",style:__assign(__assign({},g),c),width:m,height:p},f?A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,quality:u,sizes:d,wrapperElement:S,format:null!=a&&a.includes("webp")&&D?FormatsMap.webp:void 0}):{src:r},{onLoad:function(e){B(!1);var A=e.currentTarget;handleImageDecode(A,h,y,r,w,b),_&&_(e)},onError:function(e){i&&("empty"!==y&&h(!0),B(!0)),v&&v(e)}},sdkInfo)):React__default.default.createElement("picture",null,f&&Array.isArray(t)&&0<(null==t?void 0:t.length)&&t.map(function(e){return React__default.default.createElement("source",__assign({key:e,type:"image/".concat(e)},A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,format:FormatsMap[e],quality:u,sizes:d,wrapperElement:S})))}),React__default.default.createElement("img",__assign({},L,{ref:G,decoding:"async",style:__assign(__assign({},g),c),width:m,height:p},f?A({src:i,unoptimized:n,width:m,height:p,layout:o,loader:l,imageSizes:s,quality:u,sizes:d,wrapperElement:S}):{src:r},{onLoad:function(e){B(!1);var A=e.currentTarget;handleImageDecode(A,h,y,r,w,b),_&&_(e)},onError:function(e){i&&("empty"!==y&&h(!0),B(!0)),v&&v(e)}},sdkInfo))),C&&"raw"!==o&&renderErrorElement({imgStyle:g,alt:e.alt,errorDataURL:E,error:R}))):React__default.default.createElement("img",__assign({},L,{style:__assign(__assign({},g),c),width:m,height:p,src:r},sdkInfo))},hasIntersectionObserver=function(){return"undefined"!=typeof IntersectionObserver},observers=new Map,idList=[],createObserver=function(e){var t,A={root:e.root||null,margin:e.rootMargin||""},a=idList.find(function(e){return e.root===A.root&&e.margin===A.margin});return a?observers.get(a):(t=new Map,a=new IntersectionObserver(function(e){e.forEach(function(e){var A=t.get(e.target),e=e.isIntersecting||0<e.intersectionRatio;A&&e&&A(e)})},e),e={id:A,observer:a,elements:t},idList.push(A),observers.set(A,e),e)},observe=function(A,e,t){var t=createObserver(t),a=t.id,r=t.observer,i=t.elements;return i.set(A,e),r.observe(A),function(){var e;i.delete(A),r.unobserve(A),0===i.size&&(r.disconnect(),observers.delete(a),-1<(e=idList.findIndex(function(e){return e.root===a.root&&e.margin===a.margin})))&&idList.splice(e,1)}},useIntersection=function(e){var A=e.rootRef,t=e.rootMargin,e=e.disabled,a=e||!hasIntersectionObserver(),r=React.useRef(),e=React.useState(e||!1),i=e[0],n=e[1],e=React.useState(A?A.current:null),o=e[0],l=e[1],e=(React.useEffect(function(){hasIntersectionObserver()||i||n(!0)},[i]),React.useEffect(function(){A&&l(A.current)},[A]),React.useCallback(function(e){r.current&&(r.current(),r.current=void 0),a||i||e&&e.tagName&&(r.current=observe(e,function(e){return e&&n(e)},{root:o,rootMargin:t}))},[a,o,t,i])),s=React.useCallback(function(){n(!1)},[]);return[e,i,s]},checkWebP=function(){return new Promise(function(A){var t=new Image;t.onload=function(){var e=160===(null==t?void 0:t.height);A(e)},t.onerror=function(){A(!1)},t.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvn8AnAAdQiUpUov+BiOh/AAA="})},useWebp=function(e){void 0===e&&(e=!1),isSSR()||(A="boolean"==typeof window.imagex_support_webp?window.imagex_support_webp:"boolean"==typeof(A=getLocalStorage("imagex_support_webp"))&&getLocalStorage("imagex_ua")===browserUserAgent?A:void 0);var A,e=React.useState(!e&&A),t=e[0],a=e[1];return React.useEffect(function(){void 0===t&&__awaiter(void 0,void 0,void 0,function(){var A;return __generator(this,function(e){switch(e.label){case 0:return[4,checkWebP()];case 1:return A=e.sent(),isSSR()||(window.imagex_support_webp=A),a(A),setLocalStorage("imagex_support_webp",A),setLocalStorage("imagex_ua",browserUserAgent),[2]}})}).catch(console.error)},[t]),[t]},checkAVIF=function(){return new Promise(function(A){var t=new Image;t.onload=function(){var e=1===(null==t?void 0:t.width);A(e)},t.onerror=function(){A(!1)},t.src="data:image/avif;base64,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"})},useAvif=function(e){void 0===e&&(e=!1),isSSR()||(A="boolean"==typeof window.imagex_support_avif?window.imagex_support_avif:"boolean"==typeof(A=getLocalStorage("imagex_support_avif"))&&getLocalStorage("imagex_ua")===browserUserAgent?A:void 0);var A,e=React.useState(!e&&A),t=e[0],a=e[1];return React.useEffect(function(){void 0===t&&__awaiter(void 0,void 0,void 0,function(){var A;return __generator(this,function(e){switch(e.label){case 0:return[4,checkAVIF()];case 1:return A=e.sent(),isSSR()||(window.imagex_support_avif=A),a(A),setLocalStorage("imagex_support_avif",A),setLocalStorage("imagex_ua",browserUserAgent),[2]}})}).catch(console.error)},[t]),[t]},useLayoutEffect="undefined"==typeof window?React__default.default.useEffect:React__default.default.useLayoutEffect,globalConfig={},GlobalConfig=function(e){void 0===e&&(e={}),globalConfig=__assign(__assign({},globalConfig),e)},validConfig=function(e){return __assign(__assign({},e||{}),{formats:Array.isArray(e.formats)?Array.from(new Set(e.formats)):void 0})},getStaticUrl=function(e){return isStaticImport(e)?(isStaticRequire(e)?e.default:e).src:e},defaultLoader=function(e){return e.src},Viewer=function(e){var A,t=React.useState(!1),a=t[0],t=t[1],r=React.useRef(null),i=useWebp(!isSafari())[0],n=useAvif(!isFirefox())[0],o=React.useRef(new Set),l=void 0!==e.width&&void 0!==e.height?"data:image/svg+xml;base64,".concat(safeBtoa('<svg width="'.concat(e.width,'" height="').concat(e.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'))):EmptyDataURL,e=validConfig(__assign(__assign(__assign({},DefaultViewerProps),globalConfig),e)),s=e.lazyBoundary,c=e.lazyRoot,u=e.onLoadingComplete,d=e.unoptimized,d=void 0!==d&&d,g=e.src,f=void 0===g?"":g,g=e.objectFit,m=e.objectPosition,p=e.loading,h=__rest(e,["lazyBoundary","lazyRoot","onLoadingComplete","unoptimized","src","objectFit","objectPosition","loading"]),y=getStaticUrl(e.src),p="lazy"===p||void 0===p,c=(((f="string"==typeof f?f:y).startsWith("data:")||f.startsWith("blob:")||"undefined"!=typeof window&&o.current.has(f)||e.ssr)&&(p=!1),isHttpUrl(f)||isTosUrl(f)||(d=!0),useIntersection({rootRef:c||null,rootMargin:s,disabled:!p})),s=c[0],I=c[1],w=c[2],c=!1,c=!!e.ssr||(!p||I)&&!!f&&(!isSafari()||void 0!==i)&&(!isFirefox()||void 0!==n),b=React.useRef(u),_=(React.useEffect(function(){b.current=u},[u]),React.useRef(f)),p=(useLayoutEffect(function(){_.current!==f&&(w(),_.current=f)},[w,f]),e.layout||(e.sizes?"responsive":"intrinsic")),I={boxSizing:"border-box",display:"block",overflow:"hidden",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},v={boxSizing:"border-box",display:"block",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},S="raw"===e.layout?{}:{position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",padding:0,border:"none",margin:"auto",display:"block",width:0,height:0,minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",objectFit:g,objectPosition:m},a="empty"===e.placeholder||a?{}:{backgroundSize:"fill"===g?"100% 100%":g||"cover",backgroundImage:'url("'.concat("skeleton"===e.placeholder?DefaultSkeletonDataUrl:e.placeholder,'")'),backgroundPosition:m||"0% 0%"},g=!1,m=("fill"===p?(I.display="block",I.position="absolute",I.top=0,I.left=0,I.bottom=0,I.right=0):void 0!==e.width&&void 0!==e.height&&("intrinsic"===p?(I.display="inline-block",I.position="relative",g=!0,v.maxWidth=I.maxWidth="100%",A="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27".concat(e.width,"%27%20height=%27").concat(e.height,"%27/%3e")):"responsive"===p?(m=e.height/e.width,m=isNaN(m)?"100%":"".concat(100*m,"%"),I.display="block",I.position="relative",g=!0,v.paddingTop=m):"fixed"===p&&(I.display="inline-block",I.position="relative",I.width=e.width,I.height=e.height)),__assign(__assign({},h),{src:l,srcString:y,loader:e.loader||defaultLoader,imageSizes:e.imageSizes,placeholderStyle:a,isVisible:c,unoptimized:d,setPlaceholderComplete:t,setTarget:s,imgStyle:Object.assign({},e.style,S),onLoadingCompleteRef:b,loadedImageURLsRef:o,wrapperElement:r,supportWebP:i,supportAVIF:n}));return React__default.default.createElement(React__default.default.Fragment,null,"raw"===e.layout?React__default.default.createElement(ImageElement,__assign({},m)):React__default.default.createElement("span",{ref:r,style:I},g&&React__default.default.createElement("span",{style:v},A&&React__default.default.createElement("img",{style:{display:"block",maxWidth:"100%",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},alt:"","aria-hidden":!0,src:A})),React__default.default.createElement(ImageElement,__assign({},m))))};exports.GlobalConfig=GlobalConfig,exports.Viewer=Viewer;
